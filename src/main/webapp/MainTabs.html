<div ng-controller="MainTabs">
    <uib-tabset>
        <uib-tab>
            <uib-tab-heading>
                <i class="fa fa-cubes"></i> VMs
            </uib-tab-heading>
            <span ng-controller="VmTab">
                <button type="button" class="btn btn-default glyphicon glyphicon-plus" ng-click="newVmForm()" uib-tooltip="Create new VM" tooltip-placement="right"></button>
                <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                        <td>name</td>
                        <td style="width:30px">vCPUs</td>
                        <td style="width:90px">RAM</td>
                        <td>status</td>
                        <td>expectations</td>
                        <td>actions</td>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="_vm in vms" ng-controller="VmRow" ng-init="init(_vm)">
                        <td>{{vm.name}}</td>
                        <td>{{vm.nrOfCpus}}</td>
                        <td>{{humanFriendlySize(vm.memory.min)}} - {{humanFriendlySize(vm.memory.max)}}</td>
                        <td>
                            <div class="progress" ng-if="vmdyn.status == 'Up'">
                                <div class="progress-bar" role="progressbar" aria-valuenow="{{vmdyn.memoryUsed}}" aria-valuemin="0" aria-valuemax="{{vm.memory.max}}">
                                        {{humanFriendlySize(vmdyn.memoryUsed)}}
                                </div>
                            </div>
                            <div class="progress" ng-if="vmdyn.status == 'Up'">
                                <div class="progress-bar" role="progressbar" aria-valuenow="{{cpuSum()}}" aria-valuemin="0" aria-valuemax="{{vm.nrOfCpus * 100}}">
                                    {{}}
                                </div>
                            </div>
                        </td>
                        <td>
                                <span ng-repeat="expectation in _vm.expectations"
                                      ng-controller="ExpectationMini"
                                      ng-init="init(expectation)">
                                    <span class="label label-{{style}}">
                                        <span class="{{icon}}"></span>
                                        {{description}}
                                    </span>
                                </span>
                        </td>
                        <td>
                            <button type="button"
                                    class="btn btn-default glyphicon glyphicon-play"
                                    ng-click="startVm()"
                                    ng-if="vmdyn.status != 'Up'"
                                    ng-disabled="workingprg"
                                    uib-tooltip="Start this VM"
                                    tooltip-placement="bottom">
                            </button>
                            <button type="button"
                                    class="btn btn-default glyphicon glyphicon-stop"
                                    ng-click="stopVm()"
                                    ng-if="vmdyn.status == 'Up'"
                                    ng-disabled="workingprg"
                                    uib-tooltip="Stop this VM"
                                    tooltip-placement="bottom">
                            </button>
                            <button type="button"
                                    class="btn btn-default fa fa-eye"
                                    ng-click="spiceConnect()"
                                    ng-if="vmdyn.status == 'Up'"
                                    ng-disabled="workingprg"
                                    uib-tooltip="Connect to VM console"
                                    tooltip-placement="bottom">
                            </button>
                            <button type="button"
                                    class="btn btn-default glyphicon glyphicon-pause"
                                    uib-tooltip="Pause this VM"
                                    ng-if="vmdyn.status == 'Up'"
                                    tooltip-placement="bottom">
                            </button>
                            <button type="button"
                                    class="btn btn-default glyphicon glyphicon-camera"
                                    uib-tooltip="Take snapshot from this VM"
                                    tooltip-placement="bottom">
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </span>
        </uib-tab>
        <uib-tab disabled="true">
            <uib-tab-heading>
                <i class="fa fa-sitemap"></i> Virtual networks
            </uib-tab-heading>
            <span ng-controller="VirtualNetworkTab">
                <button type="button" class="btn btn-default glyphicon glyphicon-plus" uib-tooltip="Create new Virtual Network" tooltip-placement="right"></button>
            </span>
        </uib-tab>
        <uib-tab >
            <uib-tab-heading>
                <i class="fa fa-database"></i> Virtual disks
            </uib-tab-heading>
            <span ng-controller="VirtualDisksTab">
                <button type="button" class="btn btn-default glyphicon glyphicon-plus" ng-click="newVirtualDisk()" uib-tooltip="Create new Virtual Disk" tooltip-placement="right"></button>
                <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                        <td>name</td>
                        <td>size</td>
                        <td>readonly</td>
                        <td>expectations</td>
                    </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="virtDisk in virtualDisks.result">
                            <td>
                                {{virtDisk.name}}
                            </td>
                            <td>
                                {{humanFriendlySize(virtDisk.size)}}
                            </td>
                            <td>
                                {{virtDisk.readOnly}}
                            </td>
                            <td>
                                <span ng-repeat="expectation in virtDisk.expectations"
                                      ng-controller="ExpectationMini"
                                      ng-init="init(expectation)">
                                    <span class="label label-{{style}}">
                                        <span class="{{icon}}"></span>
                                        {{description}}
                                    </span>
                                </span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </span>
        </uib-tab>
        <uib-tab>
            <uib-tab-heading>
                <i class="fa fa-server"></i> Hosts
            </uib-tab-heading>
            <span ng-controller="HostTab">
                <button type="button" class="btn btn-default glyphicon glyphicon-plus" ng-click="newHostForm()" uib-tooltip="Join a new Host" tooltip-placement="right"></button>
                <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                        <td>address</td>
                        <td>status</td>
                        <td>info</td>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="_host in hosts" class="clickable" ng-click="showHostDetails(_host.id)" ng-controller="HostRowController" ng-init="init(_host)">
                        <td>{{host.address}}</td>
                        <td>
                            <uib-progress>
                                <uib-bar value="hostDyn.userCpu" min="0" max="100">
                                    {{hostDyn.userCpu}} %
                                </uib-bar>
                                <uib-bar type="warning" value="hostDyn.systemCpu" min="0" max="100">
                                    {{hostDyn.systemCpu}} %
                                </uib-bar>
                            </uib-progress>
                        </td>
                        <td><span ng-if="host.capabilities.distribution" class="label label-primary">
                                    <i class="fa fa-linux"></i>
                                    {{host.capabilities.distribution.name}}
                                    {{host.capabilities.distribution.version.major}}
                                    {{host.capabilities.distribution.version.minor}}
                                    </span>
                                    <span ng-if="host.capabilities.system.manufacturer" class="label label-default">
                                    <i class="fa fa-industry"></i>
                                    {{host.capabilities.system.manufacturer}}
                                    </span>
                                    <span ng-if="host.capabilities.cpuArchitecture" class="label label-info">
                                    <i class="fa fa-gear"></i>
                                    {{host.capabilities.cpuArchitecture}}
                                    </span>
                                    <span ng-if="host.capabilities.cpuArchitecture" class="label label-success">
                                    <i class="fa fa-reorder"></i>
                                    {{humanFriendlySize(host.capabilities.totalMemory)}}
                                    </span>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <ul class="pagination">
                    <li><a href="#">&laquo;</a></li>
                    <li><a href="#">&raquo;</a></li>
                </ul>
            </span>
        </uib-tab>
        <uib-tab>
            <uib-tab-heading>
                <i class="glyphicon glyphicon-info-sign"></i> About
            </uib-tab-heading>
            <div ng-controller="VersionInfo" class="versioninfobox">
                <img src="img/kerub.png"><br>
                <span>title: {{versionInfo.title}}</span><br>
                <span>vendor: {{versionInfo.vendor}}</span><br>
                <span>version: {{versionInfo.version}}</span><br>
                <span><a href="apidoc/">api documentation</a></span><br>
            </div>
        </uib-tab>
        <uib-tab>
            <uib-tab-heading>
                <i class="fa fa-balance-scale"></i> Status
            </uib-tab-heading>
        </uib-tab>
        <uib-tab-heading ng-controller="SearchController">
            <div class="input-group">
                <div class="input-group-addon">
                    <span class="fa fa-search"></span>
                </div>
                <input class="form-control" placeholder="Search">
            </div>
        </uib-tab-heading>
    </uib-tabset>
</div>
